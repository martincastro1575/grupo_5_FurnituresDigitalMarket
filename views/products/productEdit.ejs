<!DOCTYPE html>
<html lang="en">
<!-- <%- include('../partials/head') %>  -->
<body>
    <%- include('../partials/header') %> 
    <div class="main-form">
    <!-- <div class="form-register"> -->
        <main>
            <h2>Edición de Producto</h2>
            <!-- ?_method=PUT -->
            <form action="/producto/editar/<%= oneProduct.id == undefined ? idProduct : oneProduct.id %>" method="POST" class="form-edit-product">
                <div class="form-control">
                    <label for="nombre-producto">Nombre del Producto</label>
                    <input type="text" name="nombreProducto" id="nombreProducto" 
                    value="<%= oneProduct.name == undefined ? oneProduct.nombreProducto : oneProduct.name %>" class="control">
                    <div class="text-danger">
                        <% if (locals.errors && errors.nombreProducto) { %>
                            <%= errors.nombreProducto.msg %> 
                        <% } %>
                    </div>
                </div>
                <div class="form-control">
                    <label for="descripcion-prod" class="control">Descripción</label>
                    <textarea name="descripcionProd" id="descripcionProd" 
                    cols="30" rows="5" class="control"><%= oneProduct.description == undefined ? oneProduct.descripcionProd : oneProduct.description%></textarea>
                    <div class="text-danger">
                        <% if (locals.errors && errors.descripcionProd) { %>
                            <%= errors.descripcionProd.msg %> 
                        <% } %>
                    </div>
                </div>
                <div class="form-control">
                    <label for="categoriaProd" class="control">Categoría</label>                    
					<select name="categoriaProd" id="categoriaProd" class="control">
						<option value=""></option>
                            <% categories.forEach(category => { %>  
                                <option value="<%= category.id  %> " <%= !oneProduct.categoriaProd ? category.id == oneProduct.categories.id ? "selected" : null : category.id == oneProduct.categoriaProd ? "selected" : null%> >
                                    <%= category.title %> 
                                </option>
                            <% }) %>                                
					</select>
                </div>
                <div class="form-control">
                    <label for="statusProd" class="control">Estatus</label>
					<select name="statusProd" id="statusProd" class="control">
						<option value="">Activo</option>
						<option value="">Inactivo</option>
					</select>
                </div>
                <div class="form-control" style="display: none;">
                    <label for="imageProduct" class="control">Seleccione Imagen</label>
                    <input type="file" name="imageProduct" id="imageProduct" 
                    accept="image/png, image/jpg, image/gif" value="X" multiple />
                    
                </div>
                <div class="form-control">
                    <label for="medidas" class="control">Medidas</label>
                    <table class="medidas" >
                        <tr>
                            <th>Largo</th>
                            <th>Ancho</th>
                            <th>Alto</th>
                        </tr>
                        <tr>
                            <td><input type="text" name="largo" id="largo" 
                                class="control" placeholder="Largo" 
                                value="<%= oneProduct.length == undefined ? oneProduct.largo : oneProduct.length %>">
                            </td>
                            <td><input type="text" name="ancho" id="ancho" 
                                class="control" placeholder="Ancho" 
                                value="<%= oneProduct.width == undefined ? oneProduct.ancho : oneProduct.width %>">
                            </td>
                            <td><input type="text" name="alto" id="alto" 
                                class="control" placeholder="Alto" 
                                value="<%= oneProduct.high == undefined ? oneProduct.alto : oneProduct.high %>">
                            </td>                        
                        </tr>                    
                    </table>                    
                </div> 
                <div class="form-control">
                    <label for="precio-producto">Precio del Producto</label>
                    <input type="text" name="precioProducto" id="precioProducto" 
                    class="control precio" value="<%= oneProduct.price == undefined ? oneProduct.precioProducto : oneProduct.price %>">
                    <div class="text-danger">
                        <% if (locals.errors && errors.precioProducto) { %>
                            <%= errors.precioProducto.msg %> 
                        <% } %>
                    </div>
                </div>
                <div class="form-control">
                    <label for="discount-producto">Descuento del Producto</label>
                    <input type="text" name="discountProducto" id="discountProducto" 
                    class="control precio" value="<%= oneProduct.discount == undefined ? oneProduct.discountProducto : oneProduct.discount %>">
                </div>
                <div class="form-control">
                    <label for="discount-producto">Cantidad Producto</label>
                    <input type="text" name="cantidadProducto" id="cantidadProducto" 
                    class="control precio" value="<%= oneProduct.quantity == undefined ?oneProduct.cantidadProducto : oneProduct.quantity %>">
                    <div class="text-danger">
                        <% if (locals.errors && errors.cantidadProducto) { %>
                            <%= errors.cantidadProducto.msg %> 
                        <% } %>
                    </div>
                </div>
                <div class="form-control">
                    <label for="discount-producto">Cantidad Minima</label>
                    <input type="text" name="cantidadMinima" id="cantidadMinima" 
                    class="control precio" value="<%= oneProduct.stock_min == undefined ? oneProduct.cantidadMinima : oneProduct.stock_min %>">
                </div>
                <div class="form-control">
                    <label for="discount-producto">Cantidad Máxima</label>
                    <input type="text" name="cantidadMaxima" id="cantidadMaxima" 
                    class="control precio" value="<%= oneProduct.stock_max == undefined ? oneProduct.cantidadMaxima : oneProduct.stock_max %>">
                </div>
                <div class="form-control text-danger val-front">
                    <ul></ul>
                </div>      
                <div class="form-control-button">
                    <button type="submit" class="button-form">Guardar Cambios</button>
                    <button type="reset" class="button-form">Limpiar</button>
                </div>
                
            </form>
            <div class="form-control-button-delete">
                
                <form action="/producto/eliminar/<%= oneProduct.id %>" method="POST" class="form-delete-product">
                    <button type="submit" class="button-form">Eliminar</button>
                </form>
                
            </div>
        </main>
    </div>
<%- include('../partials/footer.ejs') %> 
</body>
</html>